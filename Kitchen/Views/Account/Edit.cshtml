@model Kitchen.ViewModel.ProfileViewModel
@{
    ViewData["Title"] = "Edit Profile";
}
<link rel="stylesheet" href="~/css/Profile.css" asp-append-version="true" />

<div class="profile-container">
    <!-- Header Section -->
    <div class="profile-header">
        <h1 class="profile-title">
            <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path>
            </svg>
            Edit Profile
        </h1>
        <p class="profile-subtitle">Update your account information and personal details</p>
    </div>

    <!-- Edit Form Section -->
    <div class="edit-form-container">
        <div class="edit-form-card">
            <h2 class="card-title">
                <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-6-3a2 2 0 11-4 0 2 2 0 014 0zm-2 4a5 5 0 00-4.546 2.916A5.986 5.986 0 0010 16a5.986 5.986 0 004.546-2.084A5 5 0 0010 11z" clip-rule="evenodd"></path>
                </svg>
                Personal Information
            </h2>
            <form asp-action="Edit" class="edit-form">
                <div asp-validation-summary="All" class="validation-summary"></div>

                <div class="form-grid">
                    <div class="form-group">
                        <label asp-for="customerName" class="form-label">
                            <svg class="form-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                            </svg>
                            Full Name
                        </label>
                        <div class="input-wrapper">
                            <input asp-for="customerName" class="form-input" placeholder="Enter your full name" />
                            <span asp-validation-for="customerName" class="field-validation"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label asp-for="customerAddress" class="form-label">
                            <svg class="form-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                            </svg>
                            Address
                        </label>
                        <div class="input-wrapper">
                            <input asp-for="customerAddress" class="form-input" placeholder="Enter your address" />
                            <span asp-validation-for="customerAddress" class="field-validation"></span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label asp-for="customerPhone" class="form-label">
                            <svg class="form-icon" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                            </svg>
                            Phone Number
                        </label>
                        <div class="input-wrapper">
                            <input asp-for="customerPhone" class="form-input" placeholder="Enter your phone number" />
                            <span asp-validation-for="customerPhone" class="field-validation"></span>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="save-btn">
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                        </svg>
                        Save Changes
                    </button>

                    <a asp-action="Profile" asp-controller="Customer" class="cancel-btn">
                        <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                        Cancel
                    </a>
                </div>
            </form>
        </div>

        <!-- Preview Card -->
        <div class="preview-card">
            <h3 class="preview-title">
                <svg class="icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path>
                </svg>
                Preview
            </h3>
            <div class="preview-content">
                <div class="preview-item">
                    <div class="preview-label">Name</div>
                    <div class="preview-value" id="preview-name">@Model.customerName</div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">Address</div>
                    <div class="preview-value" id="preview-address">@Model.customerAddress</div>
                </div>
                <div class="preview-item">
                    <div class="preview-label">Phone</div>
                    <div class="preview-value" id="preview-phone">@Model.customerPhone</div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* Additional styles for the edit form */
    .edit-form-container {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 2rem;
        margin-bottom: 2rem;
    }

    .edit-form-card {
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: var(--card-shadow);
        position: relative;
        overflow: hidden;
    }

    .edit-form-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: var(--gradient-bg);
    }

    .edit-form {
        margin-top: 1rem;
    }

    .form-grid {
        display: grid;
        gap: 1.5rem;
    }

    .form-group {
        position: relative;
    }

    .form-label {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
        font-size: 0.95rem;
    }

    .form-icon {
        width: 1rem;
        height: 1rem;
        color: var(--secondary-color);
    }

    .input-wrapper {
        position: relative;
    }

    .form-input {
        width: 100%;
        padding: 1rem 1.25rem;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background: #f8f9fa;
        color: var(--text-primary);
    }

    .form-input:focus {
        outline: none;
        border-color: var(--secondary-color);
        background: white;
        box-shadow: 0 0 0 3px rgba(211, 84, 0, 0.1);
        transform: translateY(-1px);
    }

    .form-input::placeholder {
        color: var(--text-muted);
    }

    .field-validation {
        display: block;
        color: var(--accent-color);
        font-size: 0.85rem;
        margin-top: 0.5rem;
        font-weight: 500;
    }

    .validation-summary {
        background: #f8d7da;
        color: var(--accent-color);
        padding: 1rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        border-left: 4px solid var(--accent-color);
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
        flex-wrap: wrap;
    }

    .save-btn {
        background: var(--gradient-bg);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 25px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
        font-size: 1rem;
        flex: 1;
        justify-content: center;
        min-width: 150px;
    }

    .save-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(211, 84, 0, 0.3);
    }

    .cancel-btn {
        background: var(--text-muted);
        color: white;
        border: none;
        padding: 1rem 2rem;
        border-radius: 25px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        text-decoration: none;
        font-size: 1rem;
        flex: 1;
        justify-content: center;
        min-width: 150px;
    }

    .cancel-btn:hover {
        background: #6c757d;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(108, 117, 125, 0.3);
    }

    .preview-card {
        background: white;
        border-radius: var(--border-radius);
        padding: 2rem;
        box-shadow: var(--card-shadow);
        height: fit-content;
        position: sticky;
        top: 2rem;
        border: 2px dashed #e9ecef;
    }

    .preview-title {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        color: var(--text-primary);
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
    }

    .preview-content {
        display: grid;
        gap: 1rem;
    }

    .preview-item {
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 8px;
        transition: background-color 0.3s ease;
    }

    .preview-item:hover {
        background: #e9ecef;
    }

    .preview-label {
        font-size: 0.85rem;
        color: var(--text-muted);
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-bottom: 0.25rem;
    }

    .preview-value {
        color: var(--text-primary);
        font-weight: 500;
        word-break: break-word;
    }
</style>

<script>
    // Live preview functionality
    document.addEventListener('DOMContentLoaded', function() {
        const nameInput = document.querySelector('input[name="customerName"]');
        const addressInput = document.querySelector('input[name="customerSAddress"]');
        const phoneInput = document.querySelector('input[name="customerPhone"]');

        const namePreview = document.getElementById('preview-name');
        const addressPreview = document.getElementById('preview-address');
        const phonePreview = document.getElementById('preview-phone');

        function updatePreview() {
            namePreview.textContent = nameInput.value || 'Not specified';
            addressPreview.textContent = addressInput.value || 'Not specified';
            phonePreview.textContent = phoneInput.value || 'Not specified';
        }

        if (nameInput) nameInput.addEventListener('input', updatePreview);
        if (addressInput) addressInput.addEventListener('input', updatePreview);
        if (phoneInput) phoneInput.addEventListener('input', updatePreview);
    });
</script>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}